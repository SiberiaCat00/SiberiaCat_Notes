# 记号的说明
* $X$代表$(X,\mathcal A,\mu)$，是一个完全的测度空间。有时，我们要求$X$是一个$\sigma$有限完全测度空间。我们会在文中说明这种情况。
* $E$是一个完全的赋范向量空间
* $S$几乎处处符合命题$E$代表$S$排除一个零测集后符合命题$E$

# 简单函数和向量值可测函数
## 由简单函数逼近向量值可测函数
我们的积分理论基于**简单函数**。简单函数类似于阶梯函数，我们可以简单的定义其积分。现在给出简单函数定义：$$\mathcal S(X,E) := <\{e\chi_A|e\in E,A\in \mathcal A,\mu(A)<\infty\}>$$一个简单函数是由一些类似于特征函数的函数线性组合而成的。实际根据定义，我们可以要求用来组合的$A$是无交的。拆分那些用来线性组合的特征函数代表的集合就能说明这一点。
所有可以由一列简单函数几乎处处逼近的函数叫做**向量值可测函数**。所有的向量值可测函数组成的集合记作$\mathcal L_{0}(X,\mu,\mathbb E)$, 我们将会走过很长的路程，最终在可测函数上建立一系列理论。


## 向量值可测函数和Borel-$\mathcal A$-可测函数的关系
### 定义：几乎处处有可分值域的函数
若某一个测度空间到拓扑空间的函数在定义域排除某一个零测集后可分，则这种函数叫几乎可分值域的函数

### sigma有限空间下任意函数几乎处处有可分值域且Borel-$\mathcal A$-可测等价于向量可测
	本节内容需要sigma有限
	Borel可测代表所有开集的原像可测，等价于所有Borel集可测。1

若$X$ $\sigma$有限，若 $f\in E^X$，则$f$向量值可测等价于 $f$ Borel-$\mathcal A$-可测且 $f$ 定义域排除某一个零测集后的像可分。
>见[[RA00 向量可测函数#Appendix#用Borel可测函数判定向量可测函数]]

### 一些向量值可测的等价描述
若$X$ $\sigma$有限，对于一个$E^{X}$里的函数$f$，下列叙述等价：
* $f$ 向量值可测 
* $f$ Borel可测 
* 所有范数拓扑开集的$f$原像可测

### 一些简单推出的定理
若$X$ $\sigma$有限：
* 若$E,F$可分，$f\in E^X$向量值可测，$g\in F^{f(X)}$连续，则$g\circ f$向量值可测。特别的，$|f|$向量值可测。
* $f = (f_0,...,f_{n})\in (K^{n})^X$可测当且仅当$f_j$可测
* $g,h\in R^X$可测当且仅当$g+ih$可测
* $f,g\in \mathcal L_{0}(X,\mu,\mathbb E)\Rightarrow (f,g)\in \mathcal L_{0}(X,\mu,E\times F)$
>1. 定义域排除一个零测集后的像可分 
>这个结论可以轻易的通过排除定义域内两个零测集后的像后让$f$和$g$的像都可分，从而乘积空间可分来证明。
>2. 开集的原象可测
>这个结论可以简单的考虑拓扑积的定义即可。

# 向量值可测函数的数乘和加法封闭性
## 向量值可测函数组成一个线性空间
假设$f,g\in \mathcal L_{0}(X,\mu,\mathbb E)$是向量值可测函数，$\alpha\in \mathbb K$则：
1. $\alpha f$是向量值可测函数 
>将收敛至$f$的简单函数列乘以$\alpha$即可
2. $f+g$是向量值可测函数
>将收敛至这两个函数的简单函数列逐项相加即可

这说明了$\mathcal L_{0}(X,\mu,\mathbb E)$实际上是一个向量空间。
## sigma有限空间下向量值可测函数的 a.e 逐点极限可测
	本小节内容需要sigma有限

若$X$ $\sigma$有限，一列向量值可测函数$f_{i} \in \mathcal L_{0}(X,\mu,\mathbb E)$的 a.e 极限函数是向量值可测的。
>见[[#Appendix#PR01 向量值可测函数的 a.e 逐点极限可测|Appendix PR02]]

## sigma有限空间下 a.e 收敛的向量值可测函数级数求和可测
若$X$ $\sigma$有限，若一列向量值可测函数级数$f_{i} \in \mathcal L_{0}(X,\mu,\mathbb E)$ a.e 收敛，则 a.e 极限可测
>很简单的通过[[RA00 向量可测函数#向量值可测函数组成一个线性空间|向量值可测函数组成一个线性空间]]和[[RA00 向量可测函数#向量值可测函数的 a e 逐点极限可测|向量可测函数#向量值可测函数的 a e 逐点极限可测]]证明


# sigma紧空间Radon测度下向量值可测和Borel-Borel可测的关系
## Radon测度的定义
我们说一个测度是Radon测度，当且仅当其定义在拓扑空间上，正则，局部有限且所有Borel集在此测度上可测。

## sigma紧空间的定义
我们说一个拓扑空间sigma紧，当且仅当其可以看作一列紧集的并。
* sigma紧拓扑空间Radon测度是sigma有限的
>因为其局部有限，可以证明每一个紧集测度有限，则整个空间是sigma有限的 

## sigma紧度量空间Radon测度下连续函数可测
若$X$是一个拥有Radon测度$\mu$的sigma紧度量空间，则$C(X,\mathbb E)\in \mathcal L_0(X,\mu,\mathbb E)$
>注意到sigma紧度量空间Radon测度下是sigma有限的。若$f\in C(X,\mathbb E)$容易证明所有的开集原像可测。由于紧集连续函数紧，我们可以得到$f(X)$也是sigma紧的，所以其自然可分。通过[[RA00 向量可测函数#sigma有限空间下用Borel- mathcal A -可测函数判定向量可测函数|sigma有限空间下用Borel-A-可测函数判定向量可测函数]]即可完成证明

## Luzin定理：sigma紧度量空间Radon测度下可测函数部分连续
若$X$是一个拥有Radon测度$\mu$的sigma紧度量空间，$f\in \mathcal L_0(X,\mu,\mathbb E)$， 则对于任何$X$中的有限测度集合$A$， 都可以找到让$f$在其上连续的紧集$K$使得$K$的测度任意逼近$A$.
>见[[RA00 向量可测函数#PR03 Luzin定理|Luzin定理的证明]]



---
# Appendix 
## 值域为度量空间的逐点收敛的函数下开集的原象
若$\varphi_{i} \in Z^Y$逐点收敛于$f$，其中$Z$为度量空间，$O$为$Z$中开集，$O_i$为所有距离$O$大于$1/(i+1)$的点组成的集合，则有$$f^{-1}(O) = \bigcup_{j,k}
\bigcap_{i>j}\varphi_{i}^{-1}(O_k)$$

	证明来自Amann analysis III X.1.4 in page 65

 * 右边是左边的子集：假设$x$属于右边，则存在某一$j,k$，对于任意$i>j$，有$x\in \varphi_{i}^{-1}(O_k)$，则$\varphi_{i}(x)\in O_k$。由于$\varphi_{i}(x)$收敛于$f(x)$，有$f(x)\in \overline{O_{k}} \subseteq O$。
* 左边是右边的子集：假设$x$属于左边，则存在$k$使得$f(x)\in O_{k}$。由于$\varphi_{i}(x)$收敛于$f(x)$，且$O_{k}$是开集，我们可以得到$\exists j:i>j\Rightarrow \varphi_{i}|_{N^{c}}(x)\in O_{k}$。
## 用Borel可测函数判定向量可测函数
若 $f\in E^X$，则$f$向量值可测等价于 $f$ Borel 可测且 $f$ 定义域排除某一个零测集后的像可分。

	证明来自Amann analysis III X.1.4 in page 65

**左边推右边**：
1. *证明几乎处处可分：*
由于$f$向量值可测，我们考虑一列几乎处处收敛于$f$的简单函数列$\varphi_i$，除去$X$中零测集$N$后这一列简单函数逐点收敛于$f$。所以$f(X-N)$在所有简单函数的像的并的闭包中。而所有简单函数的像的并是可数的，所以$f(X-N)$自然可分。这证明了$f(X)$几乎处处可分。 
2. *证明开集的原像可测：*
若$O$是$X$中开集，我们要证明$f^{-1}(O)$是可测的。考虑距离$O^c$距离大于$1/i$组成的集合$O_i$。容易从点与集合的距离的性质出发说明$O_i$是开集，且$O = \bigcup_{i}O_{i},\overline{O_{i}}\subseteq O$. 设$\varphi_{i}$在$N^c$上逐点收敛于$f$且$N$零测，由[[#Appendix#LM00 值域为度量空间的逐点收敛的函数下开集的原象|引理]]可以得到如下集合相等，且右边集合是可测的$$f|_{N^{c}}^{-1}(O) = \bigcup_{j,k}
\bigcap_{i>j}\varphi_{i}|_{N^{c}}^{-1}(O_k)$$
证明了这两个集合相等后，由完全测度的性质补充一个零测集$f|_{N}^{-1}(O)$之后就能证明开集的原象可测。

**右边推左边**：
1. *我们先证明对于有限测度空间$X$我们可以用简单函数列 $\{\varphi_{i}\}$ a.e 逼近任意Borel可测且$f(X)$ a.e 可分函数的函数$f$。*
*我们会选择可数个零测集排除在我们的证明之外。最终我们构造的简单函数列将在这些集合的并集的补集上收敛于$f$*
假设$f(N^c)$可分，我们选取其可数稠密子集$e_{i}$. 对于任意$j$，考虑这些点周围$1/(j+1)$半径的开球所构成的集族$\{\mathbb B(e_i,1/(j+1))\}$，这些集合覆盖了$f(N^c)$， 而且这些集合的原象是可测的。考虑他们在$f|_{N^{c}}$下的原象，我们有：$$N^{c}=\bigcup_{i}f|_{N^{c}}^{-1} (\mathbb B(e_i,1/(j+1)))$$
由于$\mu(N^{c})\leq \mu(X)<\infty$，我们可以选取一个$k_{j}$，提取这个集合的可数并的前$k_{j}$项，让这个并集以外的测度小于$1/2^{j+1}$，即 $$R_{j} := N^c-\bigcup_{i}^{k_{j}}f|_{N^{c}}^{-1} (\mathbb B(e_i,1/(j+1)))\  \& \ \mu(R_{j})< \frac{1}{2^{j+1}} $$
我们如此定义$\varphi_i$:$$\varphi_{j }:= \left\{\begin{align}&e_{0} && \text{if } x\in \mathbb B(e_0,1/(j+1))\\&e_{i} &&\text{if } x\in \mathbb B(e_i,1/(j+1))-\bigcup_{i=0}^{k-1} \mathbb B(e_i,1/(j+1)) \text{ for }1\leq k \leq k_{j} \\& 0 && \text{otherwise}\end{align}\right.$$
则$\varphi_{j}|_{N^{c}}$在除去$R_j$以外的区域内与$f|_{N^{c}}$的值距离小于$1/(j+1)$. 我们得到对于任意$n$，$\varphi_{j}|_{N^{c}}$在$\bigcup_{j=n}^{\infty} R_{j}$的区域外逐点收敛于$f|_{N^{c}}$。则所有不收敛于$f$的点应该是如下集合$R$的子集：$$R:=\bigcap_{n=0}^{\infty}\bigcup_{j=n}^{\infty} R_{j}$$容易证明此集合零测。所以我们构造的$\varphi_{i}$在$X-{R\cup N}$上收敛于$f$.

2. *我们处理$X$是$\sigma$有限的情况：*
我们把$X$无交地分成有限测度集合的并：$X=\bigcup_{i}X_{i}$，用1中的证明构造$\varphi_{i,j}$依$j$ a.e 逐点收敛于$f|_{X_{i}}$. 设$$\varphi_{k} := \sum\limits_{j=0}^{k} \varphi_{k-j,k}$$则$\varphi_k$ a.e 收敛于$f$

## 向量值可测函数的 a.e 逐点极限可测
一列向量值可测函数$f_{i} \in \mathcal L_{0}(X,\mu,\mathbb E)$的 a.e 极限函数是向量值可测的。 

	证明来自Amann analysis III X.1.14 in page 73

除去定义域内某一个零测集后任意$f_i$逐点收敛于$f$，且$f_i$分别除去某一零测集后的像可分. 我们取这些零测集的并记作$N$. 则$f_{i}|_{N^{c}}$逐点收敛于$f|_{N^{c}}$且值域可分。

**证明定义域除去$N$后的像可分：**

根据$N$的定义，$f_{i}|_{N^c}$的值域是可分的，且$f_{i}|_{N^c}$逐点收敛于$f|_{N^c}$. 则$$f|_{N^{c}}(N^{c}) \subseteq  \overline{\bigcup_{i} f_{i}|_{N^{c}}(N^{c})}$$
是可分的

**证明开集的原象可测：**
若$O$是任意一个开集，我们把到$O^{c}$的距离大于$1/k$的集合记作$O_k$. 由[[#Appendix#LM00 值域为度量空间的逐点收敛的函数下开集的原象|引理]]得到下列集合相等：$$f|_{N^{c}}^{-1}(O) = \bigcup_{j,k}
\bigcap_{i>j}f_{i}|_{N^{c}}^{-1}(O_k)$$由完全测度的性质补充一个零测集后即可证明 

## Luzin定理
若$X$是一个拥有正则测度$\mu$的sigma有限拓扑空间，$f\in \mathcal L_0(X,\mu,\mathbb E)$， 则对于任何$X$中的有限测度集合$A$和任意正实数$\varepsilon$， 都可以找到让$f$在其上连续的$A$的子紧集$K$使得$\mu(A-K)< \varepsilon$

 


**找到$A$内的零测集$N$使得$f|_{A-N}$的像可分并且设$A_{1}:=A-N$** 
这可以从[[RA00 向量可测函数#sigma有限空间下用Borel- mathcal A -可测函数判定向量可测函数|sigma有限空间下用Borel-A-可测函数判定向量可测函数]]得到。注意$A_{1}$可测，$f|_{A_{1}}$向量值可测，$\mu(A-A_{1}) = 0$

**找到$f|_{A_{1}}$的像的可数拓扑基并且记在$\mathbb E$中形成像中该拓扑基的开集族为$V_{i}$**
可数拓扑基由可分性构造，$V_{i}$由简单的拓扑学知识构造

**构造连续区域**
根据[[RA00 向量可测函数#sigma有限空间下用Borel- mathcal A -可测函数判定向量可测函数|sigma有限空间下用Borel-A-可测函数判定向量可测函数]]可得$f|_{A_{1}}^{-1}(V_{i})$可测，根据正则测度的性质找到紧集族$K_{i}$和开集族$U_{i}$使得$K_{i}\subseteq f|_{A_{1}}^{-1}(V_{i}) \subseteq U_{i}$且$\mu(U_{i}-K_{i}) < \varepsilon 2^{-(i+3)}$. 令$U := \bigcup_{i} (U_{i} - K_{i})$，定义$A_{2}:= A_{1}-U$.   注意$A_{2}$可测，$f|_{A_{2}}$向量值可测，$\mu(A-A_{2})< \varepsilon /2$
$f|_{A_{2}}$即我们想要的连续函数（虽然其不是定义在紧集上的）

**证明在构造的区域连续**
假设$f|_{A_{2}}(x) =y$且$V$是$y$的邻域，则存在一个拓扑基$V_i$使得$y\in V_{i} \subseteq V$，所以$x\in f|_{A_{2}}^{-1}(V_{i})$. 根据$A_2$的定义这个集合的原像必定处于$K_{i}$中且$U_{i}\cap A_{2} \subseteq f|_{A_{2}}^{-1}(V_{i})$. 所以$U_{i}$是$x$的开邻域且$f|_{A_{2}}(U_{i}\cap A_{2}) \subseteq V_{i}$.  这样证明了所构造的区域内函数连续

**再次缩减到紧集上**
接下来我们只需要使用正则性质取$A_2$的紧子集$K$使得其满足$\mu(A_{2}-K) < \varepsilon/2$. 这样的$K$简单验证其符合条件.