# Free module 
	R denote a ring
## Structure: $R^{\oplus X}$ 
Assume $X$ be a set, $\mathrm I$ is the discrete category generated by $X$, and $\mathscr F$ just send $I\in \mathrm I$ to $R$(as module). then $R^{\oplus X}:=\coprod\limits_{I\in \mathrm I} \mathscr F$ is the [[LA00 模的定义，模态射和直和与直积#Arbitrary product and coproduct|coproduct of $R$-mod]]
* For $r \in R^{\oplus X}$: we use $r_x$ to denote the image of $x$, and $r^{-1}:= \{x\in X|r_{x}\neq 0\}$ 
* By definition, there is a nature module structure on $R^{\oplus X}$ 
## Definition: Forger functor of module
Let $\mathscr G: R\mathrm{-Mod} \rightarrow \mathrm{Set}$ be the functor which map $R\mathrm{-Mod}\  M$ to its set $M$, and map$R\mathrm{-Mod}$ morphism to the set function it contains. This is the forget functor.

## Definition: Free functor of module
Let $\mathscr F: R\mathrm{-Mod} \rightarrow \mathrm{Set}$ be the functor which map set $X$ to the module $R^{\oplus X}$, and map $r\in R^{\oplus X}$ to  $$\mathscr F(r) := \lambda y.\left(\sum\limits_{x\in r^{-1}_y} m(x)\right)$$This is the free functor. 

## Proposition: $\mathscr F$ and $\mathscr G$ are [[Basic Category#Adjoint Functors|adjoint]].
We can define $\nu: \hom_{\mathrm {Set}} (X,\mathscr G(M))\rightarrow \hom_{R-\mathrm {mod}}(\mathscr F(X),M)$ by$$g \rightarrow \lambda r.(\sum\limits_{x\in r^{-1}} f(x)g(x))$$
and it is trivial to prove it satisfy the definition of adjoint functor. Hence $R^{\oplus X}$ is called **free modulle**

## Broader definition of free module.

We generally say a module is free if and only if **it is isomorphic to a free module**.

# Linear independence , generate group  and basis 
	R denote a ring
## Definition: Linear independence and generate  

Assume $a:I\rightarrow M$ is a [[Basic Structure#Indexed subset|indexed set]]  of a $R$-module $M$, $a$ is **linear independent** if and only if $\nu(i)$ is a **monomorphism**,  $a$ **generate $M$** if and only if $\nu(i)$ is a **epimorphism**.
Notice: by [[LA00 模的定义，模态射和直和与直积#Classification of injective and surjective morphism|Classification of injective and surjective morphism of R-module]]: $a$ is **linear independent** if and only if  $\nu(i)$ is a **injection**,  $a$ **generate $M$** if and only if $\nu(i)$ is a **surjection**.
The definition can be easily transport to a subset of $M$ by definiting the ordered set $S$ of $M$ $i:S\rightarrow S$.
>In many algebra textbooks: $M$ is linear independent if finite linear combination of $M$ cannot be zero. It is easy to prove the two definition are equal.

## Lemma: Maximal linearly independent subset exists.
Assume $M$ is a $R$-module, the **maximal linearly independent subset**(In inclution relation) of $M$ exists.
>Proof: Assume $\mathcal{F}$ is the set of linearly independent subset of $M$ ordered by inclution, then for a chain $S_i$ in $\mathcal{F}$: $\bigcup\limits_{i\in I}S$ is a upper bound of $S_i$. Hence by **Zorn's Lemma** the maximal linearly independent subset of $M$ exists.    

## Definition: Basis
An indexed set $e: I \rightarrow M$ is a **basis** if it generates $M$ and is linearly independent. A subset of $M$ is a basis if and only if $id:M \rightarrow M$ is a basis of $M$.
>Note: $M$ have a basis $\Leftrightarrow$ $M$ is free.

If $e:I\rightarrow M$ is a basis for $M$, we use $[r_{i}]$ to display the element in $R^{\oplus I}$ which the $i$-th coordinate is $r_{i}$, and we set $e_{i}:=e([u_j])$ where $u_{j}=0$ for $j\neq i$ and $u_{j} = 1$ for $j=i$.  If $m$ is a element in $M$, we use $m_i$ to display the $i$-th coordinate of $[m_{i}]$  which $e[m_{i}]=m$. We have $e[m_{i}] = m = \sum\limits_{i} m_{i}e_{i}$. We can say that to select a basis for $M$ is just to select a suitable group of elements $e_{i}$ in $M$ which is linear independet and generates $M$

# Dimention of linear space
	Linear space have many properties different from other $R$-module. We need some theorem in linear space to generate more theorem 
## Definition: Linear space 
A **linear space** is a $k$-module where $k$ is a field. It also called **vector space**

## Theorem: **In linear space\: ** Maximal linear independent $\Leftrightarrow$ Minimum generate  $\Leftrightarrow$ Basis
> Proof:
> * $\Rightarrow$: Assume $M$ is a linear space and $S$ is maximal linear independent set. Then for any $m \in M$, there exists finite $s_{i} \in S$: $\sum\limits_{i}r_{i}s_{i}+rm=0$. Hence $m = -r^{-1} \sum\limits_{i}r_{i}s_{i}$. Hence $M$ is a generate set of $M$. 
Assume $S$ is not a minimum generate set, then a proper subset $T$ of $S$ also generate $M$ and $s \in S$, $s \notin T$, and $\sum\limits_{i}t_{i}=s$. Hence $\sum\limits_{i}t_{i} - s=0$, it can not happen.   
> * $\Leftarrow$: Assume $M$ is a linear space and $S$ is minimum generate set. Assume $S$ is not linear independent, then there exists finite $s_{i} \in S$ and $m\in S$: $$rm+\sum\limits_{i}r_{i}s_{i} = 0$$$$m=-r^{-1} \sum\limits_{i}r_{i}s_{i} $$Then $\{s_i\}$ generate $M$, it cannot happen.
Now assume $S$ is not maximal linear independent, hence there exists $m \in M$ which $S\cup \{m\}$ is linear independent. Because $S$ generate $M$, there exists finite $s_{i} \in S$:$$m= \sum\limits_{i}r_{i}s_{i} $$$$\sum\limits_{i}r_{i}s_{i} -m= 0$$ It can not happen.

注意：这说明了任意线性空间都是自由模，任意极大线性无关组或者极小生成组都是线性空间的基。
## Proposition: Expand to basis
let $V$ be a $k$-vector space. Let $S$ be a linearly independent set of vectors of $V$. Then there exists a basis $B$ of $V$ containing $S$.
> Proof: [[#Lemma: Maximal linearly independent subset exists|Maximal linearly independent subset exists]] and [[#Theorem: Maximal linear independent $ Leftrightarrow$ Minimum generate in **linear space** $ Leftrightarrow$ Basis|Basis in linear space]] lead to the consequence.

## Proposition: Shrink to basis 
let $V$ be a $k$-vector space. Let $S$ be a generate set of vectors of $V$. Then $S$ contains a basis.
>Proof: We can use **zorn's lemma** to choose a maximal linear independent set $S'$ **in $S$**. Hence any element of $S$ can be represent by a linear combination (Notice: $k$ is a field, and we can take inverse!) of finite many element of $S'$. Hence $S'$ generate $S$, $S'$ is a basis for $V$.

# Rank theorey
	R denote a commutative ring
## Lemma: Basis of CR free module
 Assume $M = R^{\oplus B}$ be a free module over a CR $R$, then  there exists a maximal ideal $\mathfrak m$ and:
 * $\mathfrak m M$ is a module over $R$,
 * $M/\mathfrak m M$ is a $R/ \mathfrak m$ vector space
 * $M/\mathfrak m M \cong ({R/ \mathfrak m})^{\oplus B}$ as $R/ \mathfrak m$ vector space 

>Proof:
>1. Existence of **maximal ideal**: It is a trivial consequence of **zorn's lemma**. Hence we get a maximal ideal $\mathfrak m$
>2. $\mathfrak m M:=\{\sum\limits_{i}\mathfrak m_{i} m_{i}\}$ is a $R$-submodule of $M$. It is trivial. 
>3. Vector space structure on $M/\mathfrak m M$: Assume $r+ \mathfrak m \in R/ \mathfrak m$, $m+ \mathfrak mM \in M/\mathfrak m M$, we define:$$(r+ \mathfrak m) (m+ \mathfrak mM):= rm + \mathfrak m M$$It is trivial to varify it satisfy the need for module.
>4. $M/\mathfrak m M \cong {R/ \mathfrak m}^{\oplus B}$ as $R/ \mathfrak m$ vector space: We define a linear map:$$M/ \mathfrak mM\rightarrow ({R/ \mathfrak m})^{\oplus B}$$$$(m_x)_{x\in B} + \mathfrak m M \rightarrow (m_{x}+ \mathfrak m)_{x\in B}$$It is trivial to prove it is a linear map and it is surjective. To prove it is a isomorphism, assume $(m_x)_{x\in B} + \mathfrak m M \neq (n_x)_{x\in B} + \mathfrak m M$, hence for some $y$ in $B$: $m_y-n_{y}\notin \mathfrak m$, hence $m_{y} -n_{y}+ \mathfrak m \neq 0+ \mathfrak m$, hence it is a isomorphism


## Theorem: Cardinality of basis
Any two basis of a free module over a CR have the same cardinality.
>Proof: 
>1. We prove the theorem for a field: Assume $S$ is a linear independent set and $B$ be a maximal linear independent set (Basis) of $V$.We take a **well ordering** on $S$ and define $S_{v}:=\{w \in S |w<v\}$, assume $v$ be a element which satisfy:
> **There exists a injection $j_v: S_v \rightarrow B$ which satisfy: $B_{v} :=(B-j(S_{v}))\cup S_v$ is a basis for $V$.**
> Now $B_{v}\cup \{v\}$ is linear dependent. Hence there exist a linear dependence relation:
> $$rv + \sum\limits_{i}r_{i}b_{i} = 0$$Which $r,\ r_i$ not 0(Because $B_v$ is linear independent) and not all $b_i$ in $S_v$ (Because $S$ is linear independent). Assume $b_j\in B-j(S_{v})$, and we set 
> $$j_{v+1}(x) = \begin{cases}
j_{v}(x), & x<v \\
b_j, & x=v \\
\end{cases}$$ 
$$S_{v+1}:=\{w \in S |w<v+1\}$$$$B_{v+1} :=(B-j(S_{v+1}))\cup S_{v+1}$$
>Then $B_{v+1}$ is a basis of $V$. By transfinite induction, there is a injection $j$ which $(B-j(S))\cup S$ is a basis of $V$. Hence every for every basis $B$ and $B'$ of $V$: $$|B|=|B'|$$
>2. Now assume $M\cong R^{\oplus X}$ and $N \cong R^{\oplus Y}$ are two free $R$ module and $M\cong N$, then by [[#Lemma: Basis of CR free module]]: There is a maximal ideal $\mathfrak m$ of $R$, and $M/\mathfrak mM \cong N / \mathfrak m N \cong (R/\mathfrak m)^{\oplus X} \cong (R/ \mathfrak m)^{\oplus Y}$, hence $|X| = |Y|$.


## Definiton: Rank of a free module 
Assume $R$ is a CR, $M$ is a free $R$ module, then we define its rank: $\mathrm {rank} M$ equal to  the cardinary of its basis.

## Theorem: Classify of free modules 
Let $R$ be a CR, $A,B$ be sets, then:$$R^{\oplus A}\cong R^{\oplus B} \Leftrightarrow  \text{There is a bijection }A\cong B$$

# Linear independent in integral domain and its field of fractions
	Denote integral domain by ID, R is a ID, K is the field of fractions of R
 

## Lemma: Linear independent in $K^{\oplus X}$ and $R^{\oplus X}$
Assume $R$ be a integral domain,  let $K$ be its field of fractions, assume $M:=R^{\oplus X}$ and $V:= K^{\oplus X}$, $S \subseteq M$, view $M$ as a $R$-submodule of $V$. Then:
* $S$ is linear independent in $M$ if and only if $S$ is linear independent in $V$.
* If $S$ generate $M$ over $R$, then it generate $V$ over $K$.
* $S$ is maximal linear independent of $M$ over $V$ if and only if $S$ is a basis for $V$ over $K$
>Proof:
>1. Assume $S$ is linear independent in $M$ as $R$-module, and now assume $S$ is not linear independent in $V$-vector space, then there exists $\sum\limits_i {\frac {r_i}{r'_i}} m_i =0$, hence $\prod\limits_i r_i \sum\limits_i {\frac {r_i}{r'_i}} m_i = \sum\limits_i \left( \prod\limits_{j\neq i} r_j\right) m_i = 0$,  hence $\{m_i\}$ are linear dependent in $M$, it can not happen.
>2. Assume $S$ is linear independent in $V$ as $K$-vector space, and now assume $S$ is not linear independent in $M$ as $M$-module, then there exists $\sum\limits_i r_i m_i=0$, hence $\sum\limits_i \frac{r_i}{1} m_i=0$, it cannot happen.
>3.   Assume $S$ generate $M$ over $R$, and assume $v=(\frac {r_i}{r_i'})_{i \in X} \in V$. Hence $m=(\prod_{i\in X}r'_i) (\frac{r_i}{r'_i}) _{i\in X}\in M$ and $S$ generate $m$ over $R$, hence $S$ generate $v = (\prod_{i\in X}\frac 1 {r'_i})m$ over $K$.
>4. Assume $S$ is maximal linear independent in $M$, then for any $m \in M$: $$\exists0 \neq  r,r_i\in R ,\exists m_i \in m: rm = \sum\limits_i r_i m_i$$ both in $M$ and $V$. Hence $m = \sum\limits_i (r_i / r)m_i$. Hence $S$ generate $V$ and linear independent (by 1), that is: $S$ is a basis for $V$ over $K$.

## Theorem: Cadinary of maximal independent subset of ID modules 
All linear independet subset of a free module of a ID have the same cadinary.
>Proof: By [[#Lemma: Linear independent in $K { oplus X}$ and $R { oplus X}$]]: Maximal linear independent set of ID free modules have the same cadinary with the correspondent basis of field of fractions vector space.

## Theorem: Generate subset of ID module contains maximal linear independent set
>Proof: By [[#Lemma: Linear independent in $K { oplus X}$ and $R { oplus X}$]] 



# Dual basis of a basis of a free module


## 基能定义对偶泛函表示
Assume $M$ is a free $R$ right-module, and $e:R^{\oplus I}\rightarrow M$ is a basis representation. Then we can define a injection:
$$e^{*}:R^{\oplus I} \rightarrow M^{*}:= \lambda u.(\lambda v.\sum\limits_{i}u_{i}v_{i})$$
这个函数被叫做对偶泛函表示。
>Given two different vector $x$ and $y$, the injective property can be proved by construct a vector $v$ which satisfy $v_{i} = 1$ for exactly one $i$ where $x_{i}\neq y_{i}$ and $v_{i'}=0$ for all $i'\neq i$. By our construct  $[T^{*} x] v = x_{i} \neq y_{i}= [T^{*} y]v$ hence $T^{*} x\neq T^{*} y$

We can also prove that if $I$ is finite, $e^*$ will be an isomorphism

## Dual basis of a finite rank free module
The injection we defined before will be an isomorphism if $I$ is finite.
>Notice 
$$e^{*}:R^{\oplus I} \rightarrow M^{*}:= \lambda u.(\lambda v.\sum\limits_{i}u_{i}v_{i})$$
>Hence for any dual function $h$, we can set $u= h(e_{i}) e_{i}$, then: $$[e^{*}u]v = \sum\limits_{i} [e^{*}u]_{i} v_{i} = \sum\limits_{i} h(e_{i})v_{i} = h(v_{i}e_{i}) = h(v)$$So the function must be an surjection.


## Isomorphism or monomorphism to dual space 
Assume $M$ is a free $R$ right-module, and $e:R^{\oplus I}\rightarrow M$ is a basis representation
* If $I$ is finite, then $e^{*}\circ e^{-1}$ is an isomorphism from $M$ to $M^{*}$
	这种情况下，$e^{*}\circ e^{-1}$被叫做基$e$定义的对偶同构
* If $I$ is infinite, then $e^{*}\circ e^{-1}$ is a monomorphism from $M$ to $M^{*}$
	 In this case, $e^{*}\circ e^{-1}$ must be not an isomorphism. 因为Set $h:=\lambda r_{i}e_{i}.\sum_{i} r_{i}$, $h$ is not in the image of $e^{*}\circ e^{-1}$
	 这种情况下，$e^{*}\circ e^{-1}$被叫做基$e$定义的对偶嵌入

In functional analysis, we can find in some normed vector space $V$ and its basis $e$, $e^{*} \circ e^{-1}$ is a bijection from $V$ to the *space of bounded linear functional* of $V$. 

